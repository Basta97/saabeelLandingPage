<section class="sb-contact-section">
    <div class="container">
        <div class="sb-contact-layout">
            <!-- Left Side - Contact Info -->
            <div class="sb-contactus">
                <div class="sb-contactus-intro">
                    <app-section-title refText="تواصل معنا"></app-section-title>
                    <div class="sb-contactus-header">
                        <h1>راسل فريقنا</h1>
                        <p>شاركنا بياناتك وسيقوم فريق خدمة العملاء بالتواصل معك مباشرة.</p>
                    </div>
                </div>

                <div class="sb-contactus-det">
                    <a href="tel:+201040436991" class="sb-contact-link">
                        <img src="/icons/call_icon.svg" alt="phone" width="32" height="32">
                        <span dir="ltr">+201040436991</span>
                    </a>

                    <a href="mailto:hi@saabeel.com" class="sb-contact-link">
                        <img src="/icons/mail_icon.svg" alt="email" width="32" height="32">
                        hi&#64;saabeel.com
                    </a>

                    <a href="#" class="sb-contact-link">
                        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24"
                            fill="#5156BE">
                            <path
                                d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z" />
                        </svg>
                        مصر - المنصورة
                    </a>
                </div>

                <div class="sb-contact-social">
                    <h4>وسائل التواصل الاجتماعي</h4>
                    <app-sb-social-icons size="medium"></app-sb-social-icons>
                </div>
            </div>

            <!-- Right Side - Contact Form -->
            <div class="sb-form-wrapper">
                @if (!isSubmitted()) {
                <form class="sb-contact-form" [formGroup]="contactForm" (ngSubmit)="onSubmit()">
                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="fullName" class="form-label">الاسم الكامل <span
                                    class="sb-required">*</span></label>
                            <input type="text" class="form-control" id="fullName" formControlName="fullName"
                                placeholder="الاسم الكامل">
                            @if (contactForm.get('fullName')?.touched && contactForm.get('fullName')?.errors) {
                            <div class="sb-error-message">
                                @if (contactForm.get('fullName')?.errors?.['required']) {
                                الاسم الكامل مطلوب
                                }
                                @if (contactForm.get('fullName')?.errors?.['minlength']) {
                                يجب أن يكون الاسم 3 أحرف على الأقل
                                }
                            </div>
                            }
                        </div>
                        <div class="col-md-6">
                            <label for="phone" class="form-label">رقم الموبايل <span
                                    class="sb-required">*</span></label>
                            <input type="tel" class="form-control" id="phone" formControlName="phone"
                                placeholder="رقم الموبايل">
                            @if (contactForm.get('phone')?.touched && contactForm.get('phone')?.errors) {
                            <div class="sb-error-message">
                                @if (contactForm.get('phone')?.errors?.['required']) {
                                رقم الموبايل مطلوب
                                }
                                @if (contactForm.get('phone')?.errors?.['pattern']) {
                                يرجى إدخال رقم صحيح
                                }
                            </div>
                            }
                        </div>
                    </div>

                    <div class="row g-3">
                        <div class="col-md-6">
                            <label for="email" class="form-label">البريد الإلكتروني <span
                                    class="sb-required">*</span></label>
                            <input type="email" class="form-control" id="email" formControlName="email"
                                placeholder="البريد الإلكتروني">
                            @if (contactForm.get('email')?.touched && contactForm.get('email')?.errors) {
                            <div class="sb-error-message">
                                @if (contactForm.get('email')?.errors?.['required']) {
                                البريد الإلكتروني مطلوب
                                }
                                @if (contactForm.get('email')?.errors?.['email']) {
                                يرجى إدخال بريد إلكتروني صحيح
                                }
                            </div>
                            }
                        </div>
                        <div class="col-md-6">
                            <label for="inquiryType" class="form-label">نوع الاستفسار <span
                                    class="sb-required">*</span></label>
                            <select id="inquiryType" class="form-select" formControlName="inquiryType">
                                <option value="" disabled>اختر نوع الاستفسار</option>
                                <option value="general">استفسار عام</option>
                                <option value="support">دعم فني</option>
                                <option value="sales">مبيعات</option>
                                <option value="partnership">شراكات</option>
                            </select>
                            @if (contactForm.get('inquiryType')?.touched && contactForm.get('inquiryType')?.errors) {
                            <div class="sb-error-message">نوع الاستفسار مطلوب</div>
                            }
                        </div>
                    </div>

                    <div class="sb-form-group">
                        <label for="message" class="form-label">الرسالة <span class="sb-required">*</span></label>
                        <textarea class="form-control" id="message" rows="6" formControlName="message"
                            placeholder="اكتب رسالتك هنا..."></textarea>
                        @if (contactForm.get('message')?.touched && contactForm.get('message')?.errors) {
                        <div class="sb-error-message">
                            @if (contactForm.get('message')?.errors?.['required']) {
                            الرسالة مطلوبة
                            }
                            @if (contactForm.get('message')?.errors?.['minlength']) {
                            يجب أن تكون الرسالة 10 أحرف على الأقل
                            }
                        </div>
                        }
                    </div>

                    <div class="sb-form-actions">
                        <button type="submit" class="sb-btn-submit" [disabled]="isSubmitting()">
                            @if (isSubmitting()) {
                            جاري الإرسال...
                            } @else {
                            أرسل رسالتك
                            }
                        </button>
                    </div>
                </form>
                } @else {
                <!-- Success State -->
                <div class="sb-success-message">
                    <div class="sb-success-icon">
                        <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="none" viewBox="0 0 24 24">
                            <path fill="#25D366"
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z" />
                        </svg>
                    </div>
                    <h2>تم إرسال رسالتك بنجاح!</h2>
                    <p>شكراً لتواصلك معنا. سيقوم فريقنا بالرد عليك في أقرب وقت.</p>

                    <div class="sb-whatsapp-prompt">
                        <p class="sb-whatsapp-text">للتواصل الأسرع، تحدث معنا مباشرة عبر واتساب</p>
                        <button class="sb-whatsapp-btn" (click)="openWhatsApp()">
                            <svg viewBox="0 0 32 32" width="24" height="24">
                                <path fill="currentColor"
                                    d="M16 0C7.164 0 0 7.164 0 16c0 2.826.739 5.478 2.033 7.788L0 32l8.484-2.014A15.916 15.916 0 0 0 16 32c8.836 0 16-7.164 16-16S24.836 0 16 0zm9.438 22.713c-.38 1.07-2.23 1.955-3.056 2.089-.827.134-1.896.181-3.062-.191-1.166-.372-3.34-1.297-5.755-3.502-3.014-2.755-4.958-6.125-5.137-6.41-.179-.285-1.492-1.977-1.492-3.772 0-1.795.916-2.683 1.271-3.045.355-.362.78-.453 1.041-.453.261 0 .523.005.751.014.24.01.561-.092.878.669.316.76 1.084 2.643 1.179 2.834.095.191.159.414.032.667-.127.252-.191.414-.38.636-.19.222-.399.495-.57.666-.19.191-.388.397-.167.779.221.382 1.304 2.152 2.797 3.485 1.919 1.713 3.487 2.24 4.004 2.474.517.234.817.195 1.117-.119.3-.314.76-.848 1.22-1.382.46-.534.856-.601 1.185-.453.329.148 2.091 1.023 2.452 1.209.361.186.603.277.691.43.088.153.088.895-.292 1.966z" />
                            </svg>
                            تواصل عبر واتساب
                        </button>
                    </div>

                    <button class="sb-btn-reset" (click)="resetForm()">إرسال رسالة جديدة</button>
                </div>
                }
            </div>
        </div>
    </div>
</section>